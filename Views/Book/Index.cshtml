@model IEnumerable<Author>
@{
    ViewBag.Title = "Authors and their books";
    var user = ViewContext.HttpContext.Session.GetSessionObjectFromJson<User>(Settings.SESSION_USER_KEY);
}
<h1>@ViewBag.Title</h1>
@if (Model.Any())
{
    <ul>
        @foreach (Author author in Model)
        {
            <li>
                @author.FirstName @author.LastName
                <ul>
                    @foreach (Book book in author.Books)
                    {
                        <li>@book.Title</li>
                    }
                </ul>
            </li>
        }
    </ul>
}

@if (user is not { IsAdministrator: true }) { return; }

<div>@Html.ActionLink("New", "create")</div>